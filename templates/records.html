<script src="../static/less-1.3.0.min.js"></script>
<script src="../static/jquery-1.7.2.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/jquery-ui.min.js" type="text/javascript"></script>
<script src="http://malsup.github.com/jquery.form.js"></script> 
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css">
<link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.0/themes/ui-lightness/jquery-ui.css" />
<link rel="stylesheet" type="text/css" href="../static/rcrd-styles.css">

<div class="container">
<div class="page-header">
  <h1>RcrdKeepr <small class ="mgmt">Vinyl Management powered by <img width="75" height="28" src='http://developer.rdio.com/files/RdioBlueLogo.png'></img></small></h1>
</div>
    <body>
        <div class="row">
            <form class="new_record form-horizontal" action="/submit" method="post">
                <div class="form-group">
                    <label for="artist" class="col-sm-2 control-label">Artist:</label>
                    <div class="col-sm-10">
                        <input type="text" id = "artist" name="artist">
                    </div>
                </div>
                <div class="form-group">
                    <label for="album" class="col-sm-2 control-label">Album:</label>
                    <div class="col-sm-10">
                        <input type="text" id = "album" name="album">
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-sm-offset-2 col-sm-10">
                        <button type="submit" class="sub btn btn-default">Add Record</button>
                    </div>
                </div>
            </form>
        </div>
        <div class="albums row">
            {% for s in selection %}
            <div class="col-md-3">
                {{ s['artist'] }} - {{ s['album'] }}
                <img class="get_details" id="{{ s['album'] }}" src="{{ s['album art'] }}"></img>
                <a data=toggle="modal" href="#editModal"><span class="glyphicon glyphicon-pencil"></span></a>
                <div class="details" id="{{s['album']}}" title="Album Information">
                    <p>
                        Release Date: {{ s['release_date'] }}
                    </p>
                    <p>
                        Duration: {{ s['duration'] }} minutes
                    </p>
                </div>

            </div>
            {% endfor %}
        </div>

    </body>
</div>

{% include 'modals.html' %}

<script>

$('.sub').click(function(e){
    e.preventDefault()
    $('.new_record').ajaxSubmit({
        success: function(r){
            console.log(r)
            $('.albums').append(r)
        },
        error: function(e){
            console.log(e)
        }
    })
})
$('.details').dialog({ autoOpen: false })
$('.get_details').dblclick(function(){
    console.log($(this).attr('id'))
    var album = $(this).attr('id')
    $('.details').dialog('open');
})

</script>